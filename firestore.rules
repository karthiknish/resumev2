rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Subscribers collection - public create, server can read
    match /subscribers/{email} {
      allow read, write: if true;
    }
    
    // Blogs collection - public read and write for server
    match /blogs/{slug} {
      allow read, write: if true;
    }
    
    // Contacts collection - public access for server
    match /contacts/{contactId} {
      allow read, write: if true;
    }
    
    // Bytes collection - public access
    match /bytes/{byteId} {
      allow read, write: if true;
    }
    
    // Comments collection - public access
    match /comments/{commentId} {
      allow read, write: if true;
    }
    
    // Chat history - public access for server
    match /chatHistory/{sessionId} {
      allow read, write: if true;
    }
    
    // Users collection - must be readable for auth
    match /users/{userId} {
      allow read, write: if true;
    }
    
    // Messages collection
    match /messages/{messageId} {
      allow read, write: if true;
    }
    
    // API Usage tracking
    match /apiUsage/{usageId} {
      allow read, write: if true;
    }
  }
}
